machine:
  node:
    version: 4.3

dependencies:
  pre:
    - bash ./circleci/set-configs.sh

test:
  override:
    - npm run test

deployment:
  production:
    branch: deploy
    commands:
      - npm run package
      - aws lambda update-function-code --function-name create-cookbook --zip-file fileb://package.zip --region ${REGION}
      - aws lambda update-function-code --function-name delete-cookbook --zip-file fileb://package.zip --region ${REGION}
      - aws lambda update-function-code --function-name get-cookbooks --zip-file fileb://package.zip --region ${REGION}
      - aws lambda update-function-code --function-name get-recipes-by-cookbook --zip-file fileb://package.zip --region ${REGION}
